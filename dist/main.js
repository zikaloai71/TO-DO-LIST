(()=>{"use strict";function e(){let e=[...document.querySelectorAll(".drag")],t=[...document.querySelectorAll(".delete")];t.forEach((n=>{n.addEventListener("click",(()=>{e[t.indexOf(n)].remove()}))}))}function t(){let e=[...document.querySelectorAll(".lists")],t=[...document.querySelectorAll(".complete")];t.forEach((n=>{n.addEventListener("click",(()=>{e[t.indexOf(n)].innerHTML="<h2>completed</h2>",e[t.indexOf(n)].style.backgroundColor="green",setTimeout((function(){e[t.indexOf(n)].remove()}),3e3)}))}))}function n(){return document.getElementById("title").value}function i(){return document.getElementById("description").value}function r(){let e=(new Date).toISOString().slice(0,10),t=document.getElementById("due-date");return t.min=e,t.value}let l,o=document.createElement("ul");function d(e,t,n,i){this.title=e,this.description=t,this.date=n,this.priority=i}function a(){let e=new d(n(),i(),r(),function(){let e=[...document.getElementsByTagName("option")];for(let t=0;t<e.length;t++)if(!0===e[t].selected){if("red"===e[t].value)return"#FF3636";if("blue"===e[t].value)return"#282A7A";if("green"===e[t].value)return"#1C7A22"}}());if(""!=n()&&""!=i()&&""!=r())return e}function s(e){let t=[...document.querySelectorAll(".lists")],n=[...document.querySelectorAll(".edit")];n.forEach((i=>{i.addEventListener("click",(r=>{"#FF3636"===e.priority?(t[n.indexOf(i)].style.backgroundColor="#282A7A",e.priority="#282A7A"):"#282A7A"===e.priority?(t[n.indexOf(i)].style.backgroundColor="#1C7A22",e.priority="#1C7A22"):"#1C7A22"===e.priority&&(t[n.indexOf(i)].style.backgroundColor="#FF3636",e.priority="#FF3636")}))}))}function c(){let n=a();e(),t(),s(n)}function u(e){this.style.opacity="0.4",l=this,e.dataTransfer.setData("text/html",this.innerHTML)}function f(e){e.preventDefault()}function m(e){l!=this&&(l.innerHTML=this.innerHTML,this.innerHTML=e.dataTransfer.getData("text/html"),c()),c()}function p(e){this.style.opacity="1"}document.getElementsByTagName("body")[0].appendChild(o);const y=document.getElementById("submit"),g=document.getElementById("todo"),h=document.getElementById("todo-form");r(),g.addEventListener("click",(()=>{1==h.classList.contains("display-none")?h.classList.remove("display-none"):h.classList.add("display-none")})),y.addEventListener("click",(n=>{n.preventDefault();let i=a();!function(e){let t=document.createElement("div"),n=document.createElement("li");o.appendChild(t),t.setAttribute("draggable","true"),t.classList.add("drag"),t.appendChild(n),n.classList.add("lists"),n.innerHTML+=`<p> <span>title :  ${e.title}</span>\n    <span> description :  ${e.description}</span>\n     <span>due-date : ${e.date}</span></p>\n    <aside>\n    <button class="delete"><i class="fa-solid fa-trash"></i></button><button class='edit'><i class="fa-solid fa-pen-to-square"></i></button><button class='complete'><i class="fa-solid fa-check"></i></button></aside> \n    `,n.style.backgroundColor=e.priority}(i),[...document.querySelectorAll(".drag")].forEach((e=>{e.addEventListener("dragstart",u),e.addEventListener("dragover",f),e.addEventListener("drop",m),e.addEventListener("dragend",p)})),e(),t(),s(i)}))})();